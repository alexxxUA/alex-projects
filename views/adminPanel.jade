extends layout
block facebookLogin
	include facebookLogin
block pageConfigValues
	include pageConfigValues
block adminPanel
	div.col-md-3.reset-padding
		div.panel.panel-info
			div.panel-heading
				h3.panel-title Server actions
			div.panel-body
				a.js-force-generate-playlists.btn.btn-success.btn-sm(href='/playlistForceGenerate', title='Force generate playlists') Force generate playlists
		div.panel.panel-info.add-alias-pan
			div.panel-heading
				h3.panel-title New alias URL
			div.panel-body
				form(action='/addAlias', ajax='true', ajax-success='adminPanel.addAlias')
					.form-group
						input.form-control.input-sm(type='text', name='alias_url', placeholder='Alias relative url', data-validate-type='notEmpty')
					.form-group
						input.form-control.input-sm(type='text', name='alias_real_url', placeholder='Actual relative url', data-validate-type='notEmpty')
					input.btn.btn-success.btn-sm(type='submit', value='ADD')
	div.col-md-9.reset-padding.aliases-list-container
		div.panel.panel-info
			div.panel-heading
				h3.panel-title Alias URLs
			div.panel-body
				table.js-alias-table.js-data-holder.table.table-hover.table-bordered.table-condensed(data-edit-url="/updateAlias", data-remove-url="/removeAlias")
					thead
						tr
							th.alias-url-title Alies relative url
							th.alias-actual-url-title Actual relative url
							th.alias-action-title.table-action-cell Actions
						tbody
							-for(var i=0; i< aliases.length; i++)
								tr.js-data-line-item
									td
										input(type='hidden', name='alias_id', value='#{aliases[i]._id}')
										input.js-input-change(type='text', name='alias_url' value='#{aliases[i].alias}', data-before-edit='#{aliases[i].alias}')
									td
										input.js-input-change.alias-actual-url(type='text', name='alias_real_url', value='#{aliases[i].path}', data-before-edit='#{aliases[i].path}')
									td.alias-action-cont.table-action-cell
										input.js-data-edid.btn.btn-xs.btn-success(type='button', value='Edit')
										input.js-data-remove.btn.btn-xs.btn-danger(type='button', value='Remove')
		div.panel.panel-info
			div.panel-heading
				h3.panel-title Users
			div.panel-body
				table.js-users-table.js-data-holder.table.table-hover.table-bordered.table-condensed.user-table(data-edit-url="/updateUser", data-remove-url="/removeUser")
					thead
						tr
							th.user-name-title Name
							th.user-email-url-title Email
							th.user-isadmin-title.center Is admin
							th.user-action-title.table-action-cell Actions
						tbody
							-for(var i=0; i< users.length; i++)
								-var isAdminOptionsMap = [{name: 'No', value: false}, {name: 'Yes', value: true}];
								tr.js-data-line-item
									td
										input(type='hidden', name='user_id', value='#{users[i]._id}')
										span=users[i].name
									td
										span=users[i].email
									td.center
										select.js-input-change.center(name="user_isadmin", data-before-edit='#{users[i].isAdmin}')
											-for(var j=0; j<isAdminOptionsMap.length; j++)
												-if(isAdminOptionsMap[j].value == users[i].isAdmin)
													option(value="#{isAdminOptionsMap[j].value}", selected)=isAdminOptionsMap[j].name
												-else
													option(value="#{isAdminOptionsMap[j].value}")=isAdminOptionsMap[j].name
									td.user-action-cont.table-action-cell
										input.js-data-edid.btn.btn-xs.btn-success(type='button', value='Edit')
										input.js-data-remove.btn.btn-xs.btn-danger(type='button', value='Remove')
				