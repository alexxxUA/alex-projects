<!DOCTYPE HTML>
<html ng-app="videoChat">

<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no, maximum-scale=1.0">
	<title>Video chat</title>
	<!-- <link rel="stylesheet" href="css/base_min.css"> -->
	<link rel="stylesheet" href="css/reset.css">
	<link rel="stylesheet" href="css/bootstrap_3.2.0.min.css">
	<link rel="stylesheet" href="css/base.css">
</head>

<body ng-controller="ChatController as chat">
    <div class="main-wrap" ng-class="{'connected': local.trustStream, 'logged': isLogget}">
		<header class="connect-bar">
			<input type="button" class="btn btn-info btn-connect" value="Connect" ng-click="connect()">
            <input type="button" class="btn btn-danger btn-leave" value="Leave" ng-click="leave()">
            <form name="chatForm" class="chat-login input-group" ng-submit="login()">
				<input type="text" class="form-control" placeholder="Your name for chat" ng-model="myName" required>
                <span class="input-group-btn">
                    <button class="btn btn-info" type="submit">Login</button>
                </span>
            </form>
		</header>
		<div class="main-container">
            <div class="peers-container peers-{{objectSize(peers)}}">
                <div class="video-wrap" ng-repeat="(key, value) in peers">
				    <video autoplay src="{{peers[key].trustStream}}"></video>
				</div>
			</div>
			<div class="chat-stream-container clearfix">
                <div class="my-stream-container">
                    <video autoplay ng-src="{{local.trustStream}}"></video>
                </div>
                <div class="chat-container">
                    <div class="chat-header">
                        <h4>Chat</h4>
                    </div>
					<div class="chat-msgs" scroll-glue-bottom>
                    	<ul class="msgs-list">
							<li class="msg-item" ng-repeat="itemMsg in msgs" ng-class="{'local-msg' : itemMsg.isLocal}">
                    			<span class="name">{{itemMsg.name}}</span>
								<span class="msg">{{itemMsg.msg}}</span>
								<span class="time">{{itemMsg.time | date : 'HH:mm'}}</span>
                    		</li>
                    	</ul>
                    </div>
                    <form name="sendMsgForm" class="chat-send-msg input-group" ng-submit="sendMsg()">
						<textarea type="text" class="form-control" placeholder="Dear {{myName}}, type your message here..." required 
							ng-model="msg"
						  	ng-keyup="$event.keyCode == 13 && $event.ctrlKey && sendMsg()"></textarea>
                        <span class="input-group-btn">
                            <button class="btn btn-info" type="submit">Send</button>
                        </span>
                    </form>
                </div>
			</div>
		</div>
	</div>
	<div class="script-section">
		<script src="app/librarys/icecomm.js"></script>
		<script src="app/librarys/angular1.3.16.min.js"></script>
		<script src="app/librarys/scrollglue.js"></script>
        <script src="app/librarys/angular-cookies1.3.16.min.js"></script>
		<script src="app/app.js"></script>
		<script src="app/controllers/mainController.js"></script>
		<script src="app/directives/mainDirective.js"></script>
		<!-- <script type="text/javascript" src="js/app_min.js"></script> -->
		<script src="http://localhost:12345/livereload.js"></script>
	</div>
</body>

</html>